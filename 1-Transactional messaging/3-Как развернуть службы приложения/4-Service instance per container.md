Паттерн "Сервисный экземпляр в контейнере" (Service Instance per Container) предлагает метод развертывания каждого экземпляра сервиса в виде контейнера, что является популярным подходом в микросервисной архитектуре.

## Контекст

В рамках микросервисной архитектуры система состоит из набора сервисов, каждый из которых развёрнут как набор экземпляров для обеспечения пропускной способности и доступности.

## Проблема

Основная задача заключается в том, как упаковывать и развертывать сервисы.

## Силы

- Сервисы могут быть написаны на различных языках и использовать разные фреймворки.
- Каждый сервис состоит из нескольких экземпляров для повышения пропускной способности и доступности.
- Сервисы должны быть независимыми в развертывании и масштабировании.
- Экземпляры сервисов должны быть изолированы друг от друга.
- Необходима быстрая сборка и развертывание сервиса.
- Требуется ограничить ресурсы (ЦП и память), потребляемые сервисом.
- Необходим мониторинг поведения каждого экземпляра сервиса.
- Развертывание должно быть надежным и экономически эффективным.

## Решение

Решение заключается в упаковке сервиса как образа контейнера (например, Docker) и развертывании каждого экземпляра сервиса как контейнера. Это позволяет обеспечить полную изоляцию между экземплярами.

## Результирующий контекст

Преимущества данного подхода включают:

- Простота масштабирования сервиса путем изменения числа экземпляров контейнеров.
- Контейнер инкапсулирует детали технологии, используемой для создания сервиса, что упрощает процессы запуска и остановки.
- Полная изоляция каждого экземпляра сервиса.
- Контейнеры накладывают ограничения на потребление ресурсов (ЦП и память).
- Контейнеры значительно быстрее в сборке и запуске по сравнению с виртуальными машинами.

Недостатки включают:

- Инфраструктура для развертывания контейнеров может быть менее развитой по сравнению с инфраструктурой для виртуальных машин.

## Связанные паттерны

- Этот паттерн является уточнением паттерна "Один сервис на хосте".
- Паттерн "Сервисный экземпляр на виртуальной машине" представляет собой альтернативное решение.
- Паттерн "Безсерверное развертывание" также предлагает альтернативный подход.

Этот паттерн обеспечивает эффективное управление развертыванием микросервисов, гарантируя высокую степень изоляции и надежности.

[Ссылка на источник](https://microservices.io/patterns/deployment/service-per-container.html)