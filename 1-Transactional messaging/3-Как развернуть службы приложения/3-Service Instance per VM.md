Паттерн "Сервисный экземпляр на виртуальной машине" (Service Instance per VM) предлагает метод развертывания каждого экземпляра сервиса как отдельной виртуальной машины (VM) в микросервисной архитектуре.

## Контекст

В рамках микросервисной архитектуры система состоит из набора сервисов, каждый из которых развёрнут как набор экземпляров для обеспечения пропускной способности и доступности.

## Проблема

Основная задача заключается в том, как упаковывать и развертывать сервисы.

## Силы

- Сервисы могут быть написаны на различных языках и использовать разные фреймворки.
- Каждый сервис состоит из нескольких экземпляров для повышения пропускной способности и доступности.
- Сервисы должны быть независимыми в развертывании и масштабировании.
- Экземпляры сервисов должны быть изолированы друг от друга.
- Необходима быстрая сборка и развертывание сервиса.
- Требуется ограничить ресурсы (ЦП и память), потребляемые сервисом.
- Необходим мониторинг поведения каждого экземпляра сервиса.
- Развертывание должно быть надежным и экономически эффективным.

## Решение

Решение состоит в упаковке сервиса как образа виртуальной машины и развертывании каждого экземпляра сервиса как отдельной VM. Это позволяет обеспечить полную изоляцию между экземплярами.

## Результирующий контекст

Преимущества данного подхода включают:

- Простота масштабирования сервиса путем увеличения числа экземпляров.
- Виртуальная машина инкапсулирует детали технологии, используемой для создания сервиса, что упрощает процессы запуска и остановки.
- Полная изоляция каждого экземпляра сервиса.
- Виртуальная машина накладывает ограничения на потребление ресурсов (ЦП и память).
- Инфраструктурные решения, такие как AWS, предоставляют зрелую и функциональную среду для развертывания и управления виртуальными машинами.

Недостатки включают:

- Процесс создания образа виртуальной машины может быть медленным и трудоемким.

## Связанные паттерны

- Этот паттерн является уточнением паттерна "Один сервис на хосте".
- Паттерн "Сервисный экземпляр в контейнере" предлагает альтернативное решение.
- Паттерн "Безсерверное развертывание" также представляет собой альтернативный подход.

Этот паттерн обеспечивает эффективное управление развертыванием микросервисов, гарантируя высокую степень изоляции и надежности.

[Ссылка на источник](https://microservices.io/patterns/deployment/service-per-vm.html)