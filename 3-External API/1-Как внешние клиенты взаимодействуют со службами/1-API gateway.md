Паттерн "API Gateway" описывает подход к организации доступа клиентов к микросервисам, предоставляя единый входной пункт для всех запросов.

## Контекст

В микросервисной архитектуре приложение состоит из множества сервисов, каждый из которых отвечает за определенную функциональность. Например, в интернет-магазине информация о продукте может быть разбита на несколько сервисов: сервис информации о продукте, сервис цен, сервис заказов и т.д. Это приводит к необходимости клиентам взаимодействовать с несколькими сервисами для получения полной информации.

## Проблема

Клиенты микросервисного приложения сталкиваются с несколькими проблемами:

- **Разная гранулярность API**: Микросервисы обычно предоставляют мелкозернистые API, что требует от клиентов взаимодействия с несколькими сервисами для получения необходимой информации.
- **Разные требования клиентов**: Например, мобильные клиенты могут иметь другие требования к данным по сравнению с веб-клиентами.
- **Проблемы производительности сети**: Мобильные сети часто медленнее и имеют большую задержку по сравнению с локальными сетями.
- **Динамическое изменение местоположения сервисов**: Количество экземпляров сервисов и их расположение могут изменяться динамически.

## Решение

Решение заключается в реализации API Gateway, который будет служить единым входным пунктом для всех клиентов. API Gateway обрабатывает запросы, перенаправляя их к соответствующим сервисам или собирая данные из нескольких сервисов.

## Преимущества API Gateway:

- **Изоляция клиентов**: Клиенты не должны беспокоиться о том, как приложение разбито на микросервисы.
- **Оптимизация API**: API Gateway может предоставлять разные API для разных клиентов.
- **Уменьшение количества запросов**: Позволяет клиентам получать данные из нескольких сервисов за один запрос.
- **Упрощение логики клиента**: Перемещает логику вызова нескольких сервисов на уровень API Gateway.
- **Протоколы**: Переводит стандартные веб-протоколы в внутренние протоколы.

## Недостатки:

- **Увеличение сложности**: API Gateway добавляет еще одну компоненту, которую нужно разрабатывать и поддерживать.
- **Увеличение времени отклика**: Дополнительный сетевой переход через API Gateway может увеличить время отклика.

## Связанные паттерны

- Паттерн "Микросервисная архитектура" создает необходимость в использовании API Gateway.
- Паттерн "Открытие клиента" или "Открытие сервера" используется для маршрутизации запросов к доступным экземплярам сервисов.
- Паттерн "Составление API" часто реализуется через API Gateway.

Этот паттерн позволяет эффективно управлять взаимодействием между клиентами и микросервисами, обеспечивая простоту и гибкость при доступе к различным функциональным возможностям системы.

[Ссылка на источник](https://microservices.io/patterns/apigateway.html)