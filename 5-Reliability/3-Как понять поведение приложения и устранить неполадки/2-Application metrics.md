Паттерн "Application Metrics" описывает подход к сбору и агрегации метрик в микросервисной архитектуре, что позволяет отслеживать поведение приложения и устранять проблемы.

## Контекст

В микросервисной архитектуре важно понимать, как ведет себя приложение, чтобы эффективно управлять его состоянием и производительностью.

## Проблема

Как понять поведение приложения и устранять возникающие проблемы?

## Силы

- Решение должно иметь минимальные накладные расходы во время выполнения.

## Решение

Необходимо инструментировать сервис для сбора статистики о его операциях. Метрики агрегируются в централизованном сервисе метрик, который предоставляет возможности отчетности и оповещения. Существует два основных подхода к агрегации метрик:

- **Push**: сервис отправляет метрики в сервис агрегации.
- **Pull**: сервис агрегации запрашивает метрики у сервиса.

## Примеры

Примеры библиотек для инструментирования:

- **Coda Hale/Yammer Java Metrics Library**
- **Prometheus client libraries**

## Результирующий контекст

Преимущества паттерна:

- Обеспечивает глубокое понимание поведения приложения.

Недостатки:

- Код для сбора метрик может переплетаться с бизнес-логикой, что усложняет поддержку.
- Агрегация метрик может потребовать значительной инфраструктуры.

Этот паттерн помогает улучшить наблюдаемость системы, позволяя разработчикам и операционным командам лучше управлять производительностью и состоянием микросервисного приложения.

[Ссылка на источник](https://microservices.io/patterns/observability/application-metrics.html)